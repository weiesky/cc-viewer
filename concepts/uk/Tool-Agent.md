# Agent

## Визначення

Запускає підагента (SubAgent) для автономної обробки складних багатокрокових завдань. Підагенти — це незалежні підпроцеси, кожен з яких має власний набір інструментів та контекст. Agent — це перейменована версія інструменту Task у нових версіях Claude Code.

## Параметри

| Параметр | Тип | Обов'язковий | Опис |
|----------|-----|--------------|------|
| `prompt` | string | Так | Опис завдання для виконання підагентом |
| `description` | string | Так | Короткий опис у 3-5 слів |
| `subagent_type` | string | Так | Тип підагента, визначає доступний набір інструментів |
| `model` | enum | Ні | Вказати модель (sonnet / opus / haiku), за замовчуванням успадковується від батьківського |
| `max_turns` | integer | Ні | Максимальна кількість агентних раундів |
| `run_in_background` | boolean | Ні | Чи запускати у фоновому режимі; фонові завдання повертають шлях output_file |
| `resume` | string | Ні | ID агента для відновлення, продовжує з останнього виконання. Корисно для продовження попереднього підагента без втрати контексту |
| `isolation` | enum | Ні | Режим ізоляції, `worktree` створює тимчасовий git worktree |

## Типи підагентів

| Тип | Призначення | Доступні інструменти |
|-----|-------------|---------------------|
| `Bash` | Виконання команд, операції git | Bash |
| `general-purpose` | Загальні багатокрокові завдання | Усі інструменти |
| `Explore` | Швидке дослідження кодової бази | Усі інструменти, крім Agent/Edit/Write/NotebookEdit/ExitPlanMode |
| `Plan` | Проєктування плану реалізації | Усі інструменти, крім Agent/Edit/Write/NotebookEdit/ExitPlanMode |
| `claude-code-guide` | Запитання-відповіді з посібника Claude Code | Glob, Grep, Read, WebFetch, WebSearch |
| `statusline-setup` | Налаштування рядка стану | Read, Edit |

## Сценарії використання

**Підходить для:**
- Складні завдання, що потребують багатокрокового автономного виконання
- Дослідження кодової бази та глибокий аналіз (з типом Explore)
- Паралельна робота, що потребує ізольованого середовища
- Довготривалі завдання, що потребують фонового виконання

**Не підходить для:**
- Читання конкретного шляху файлу — використовуйте безпосередньо Read або Glob
- Пошук у 2-3 відомих файлах — використовуйте безпосередньо Read
- Пошук конкретного визначення класу — використовуйте безпосередньо Glob

## Примітки

- Після завершення підагент повертає одне повідомлення; його результати не видимі користувачу, основний агент повинен їх передати
- Для підвищення ефективності можна запускати кілька паралельних викликів Agent в одному повідомленні
- Прогрес фонових завдань перевіряється через інструмент TaskOutput
- Тип Explore повільніший за прямий виклик Glob/Grep, використовуйте лише коли простого пошуку недостатньо
- Використовуйте `run_in_background: true` для довготривалих завдань, що не потребують негайного результату; використовуйте режим переднього плану (за замовчуванням), коли результат потрібен перед продовженням
- Параметр `resume` дозволяє продовжити раніше розпочату сесію підагента, зберігаючи накопичений контекст

## Значення в cc-viewer

Agent — це нова назва інструменту Task в останніх версіях Claude Code. Виклики Agent створюють ланцюг запитів SubAgent; у списку запитів можна побачити послідовності підзапитів, незалежні від MainAgent. Запити SubAgent зазвичай мають скорочений system prompt та менше визначень інструментів, що створює помітний контраст з MainAgent. У cc-viewer можуть відображатися назви інструментів `Task` або `Agent` залежно від версії Claude Code, використаної в записаній розмові.
