# CC-Viewer

نظام مراقبة الطلبات لـ Claude Code يلتقط ويعرض جميع طلبات واستجابات API في الوقت الفعلي. يساعد المطورين على مراقبة Context الخاص بهم للمراجعة وتصحيح الأخطاء أثناء Vibe Coding.

[简体中文](../README.md) | [繁體中文](./README.zh-TW.md) | [한국어](./README.ko.md) | [日本語](./README.ja.md) | [Deutsch](./README.de.md) | [Español](./README.es.md) | [Français](./README.fr.md) | [Italiano](./README.it.md) | [Dansk](./README.da.md) | [Polski](./README.pl.md) | [Русский](./README.ru.md) | [العربية](./README.ar.md) | [Norsk](./README.no.md) | [Português (Brasil)](./README.pt-BR.md) | [ไทย](./README.th.md) | [Türkçe](./README.tr.md) | [Українська](./README.uk.md)

## الاستخدام

```bash
npm install -g cc-viewer
```

بعد التثبيت، قم بتشغيل:

```bash
ccv
```

يقوم هذا الأمر تلقائيًا بحقن سكريبت المراقبة في Claude Code المثبت محليًا ويضيف hook إعادة الحقن التلقائي إلى إعدادات الصدفة الخاصة بك (`~/.zshrc` أو `~/.bashrc`). ثم استخدم Claude Code كالمعتاد وافتح `http://localhost:7008` في متصفحك لعرض واجهة المراقبة.

بعد تحديث Claude Code، لا حاجة لأي إجراء يدوي — في المرة التالية التي تشغل فيها `claude`، سيكتشف تلقائيًا ويعيد الحقن.

### إلغاء التثبيت

```bash
ccv --uninstall
```

ينظف حقن cli.js و hook إعدادات الصدفة في خطوة واحدة.

## الميزات

### مراقبة الطلبات (Raw Mode)

- التقاط في الوقت الفعلي لجميع طلبات API من Claude Code، بما في ذلك الاستجابات المتدفقة
- اللوحة اليسرى تعرض طريقة الطلب، URL، المدة، ورمز الحالة
- تحديد وتصنيف تلقائي لطلبات Main Agent و Sub Agent
- اللوحة اليمنى تدعم التبديل بين علامتي Request / Response
- Request Body يوسع `messages`، `system`، `tools` بمستوى واحد افتراضيًا
- Response Body موسع بالكامل افتراضيًا
- التبديل بين عرض JSON وعرض النص العادي
- نسخ محتوى JSON بنقرة واحدة
- طلبات MainAgent تدعم Body Diff JSON، تعرض بشكل مطوي الفروقات مع طلب MainAgent السابق (الحقول المتغيرة/المضافة فقط)

### Chat Mode

انقر على زر "Chat mode" في أعلى اليمين لتحليل سجل المحادثة الكامل لـ Main Agent إلى واجهة دردشة:

- رسائل المستخدم محاذاة لليمين (فقاعات زرقاء)، ردود Main Agent محاذاة لليسار (فقاعات داكنة) مع عرض Markdown
- رسائل `/compact` يتم اكتشافها تلقائيًا وعرضها مطوية، انقر لتوسيع الملخص الكامل
- نتائج استدعاءات الأدوات معروضة ضمنيًا داخل رسالة Assistant المقابلة
- كتل `thinking` مطوية افتراضيًا، انقر للتوسيع
- `tool_use` معروض كبطاقات استدعاء أدوات مدمجة (Bash، Read، Edit، Write، Glob، Grep، Task لكل منها عرض مخصص)
- رسائل اختيار المستخدم (AskUserQuestion) معروضة بتنسيق سؤال وجواب
- وسوم الحقن النظامي (`<system-reminder>`، `<project-reminder>`، إلخ) مطوية تلقائيًا
- النص المحقون من النظام يُفلتر تلقائيًا، ويعرض فقط مدخلات المستخدم الحقيقية
- عرض مقسم إلى جلسات متعددة (تقسيم تلقائي بعد `/compact`، `/clear`، إلخ)
- كل رسالة تعرض طابعًا زمنيًا بدقة الثانية

### Token Stats

لوحة تظهر عند التمرير في منطقة الرأس:

- عدد Token مجمع حسب النموذج (إدخال/إخراج)
- عدد إنشاء/قراءة Cache ونسبة إصابة Cache
- العد التنازلي لانتهاء صلاحية Cache لـ Main Agent

### إدارة السجلات

عبر القائمة المنسدلة CC-Viewer في أعلى اليسار:

- استيراد السجلات المحلية: تصفح ملفات السجلات التاريخية، مجمعة حسب المشروع، تفتح في نافذة جديدة
- تحميل ملف JSONL محلي: اختيار وتحميل ملف `.jsonl` محلي مباشرة (حتى 200 ميجابايت)
- تنزيل السجل الحالي: تنزيل ملف سجل المراقبة JSONL الحالي
- تصدير مطالبات المستخدم: استخراج وعرض جميع مدخلات المستخدم، مع عرض قابل للطي لـ system-reminder
- تصدير المطالبات إلى TXT: تصدير مطالبات المستخدم إلى ملف `.txt` محلي

### دعم متعدد اللغات

يدعم CC-Viewer 18 لغة، ويتبدل تلقائيًا بناءً على إعدادات النظام المحلية:

简体中文 | English | 繁體中文 | 한국어 | Deutsch | Español | Français | Italiano | Dansk | 日本語 | Polski | Русский | العربية | Norsk | Português (Brasil) | ไทย | Türkçe | Українська

## License

MIT
