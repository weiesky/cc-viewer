# CC-Viewer

ระบบตรวจสอบคำขอสำหรับ Claude Code ที่จับและแสดงผลคำขอและการตอบกลับ API ทั้งหมดแบบเรียลไทม์ ช่วยให้นักพัฒนาตรวจสอบ Context เพื่อทบทวนและแก้ไขข้อผิดพลาดระหว่าง Vibe Coding

[简体中文](../README.md) | [English](./README.en.md) | [繁體中文](./README.zh-TW.md) | [한국어](./README.ko.md) | [日本語](./README.ja.md) | [Deutsch](./README.de.md) | [Español](./README.es.md) | [Français](./README.fr.md) | [Italiano](./README.it.md) | [Dansk](./README.da.md) | [Polski](./README.pl.md) | [Русский](./README.ru.md) | [العربية](./README.ar.md) | [Norsk](./README.no.md) | [Português (Brasil)](./README.pt-BR.md) | [Türkçe](./README.tr.md) | [Українська](./README.uk.md)

## การใช้งาน

```bash
npm install -g cc-viewer
```

หลังจากติดตั้งแล้ว ให้รัน:

```bash
ccv
```

คำสั่งนี้จะฉีดสคริปต์ตรวจสอบเข้าไปใน Claude Code ที่ติดตั้งในเครื่องของคุณโดยอัตโนมัติ และเพิ่ม hook สำหรับฉีดซ้ำอัตโนมัติในไฟล์กำหนดค่า shell ของคุณ (`~/.zshrc` หรือ `~/.bashrc`) จากนั้นใช้ Claude Code ตามปกติและเปิด `http://localhost:7008` ในเบราว์เซอร์เพื่อดูหน้าจอตรวจสอบ

หลังจาก Claude Code อัปเดต ไม่จำเป็นต้องดำเนินการด้วยตนเอง — ครั้งถัดไปที่คุณรัน `claude` ระบบจะตรวจจับและฉีดซ้ำโดยอัตโนมัติ

### ถอนการติดตั้ง

```bash
ccv --uninstall
```

ล้างการฉีด cli.js และ hook ในไฟล์กำหนดค่า shell ในขั้นตอนเดียว

## คุณสมบัติ

### การตรวจสอบคำขอ (โหมด Raw)

- จับคำขอ API ทั้งหมดจาก Claude Code แบบเรียลไทม์ รวมถึงการตอบกลับแบบ streaming
- แผงด้านซ้ายแสดงเมธอดของคำขอ, URL, ระยะเวลา และรหัสสถานะ
- ระบุและติดป้ายกำกับคำขอ Main Agent และ Sub Agent โดยอัตโนมัติ
- แผงด้านขวารองรับการสลับแท็บ Request / Response
- Request Body ขยาย `messages`, `system`, `tools` หนึ่งระดับตามค่าเริ่มต้น
- Response Body ขยายทั้งหมดตามค่าเริ่มต้น
- สลับระหว่างมุมมอง JSON และมุมมองข้อความธรรมดา
- คัดลอกเนื้อหา JSON ด้วยคลิกเดียว
- คำขอ MainAgent รองรับ Body Diff JSON แสดงความแตกต่างแบบพับได้กับคำขอ MainAgent ก่อนหน้า (แสดงเฉพาะฟิลด์ที่เปลี่ยนแปลง/เพิ่มเติม)

### โหมด Chat

คลิกปุ่ม "โหมด Chat" ที่มุมขวาบนเพื่อแยกวิเคราะห์ประวัติการสนทนาทั้งหมดของ Main Agent เป็นหน้าจอแชท:

- ข้อความผู้ใช้จัดชิดขวา (ฟองสีน้ำเงิน) การตอบกลับของ Main Agent จัดชิดซ้าย (ฟองสีเข้ม) พร้อมการแสดงผล Markdown
- ข้อความ `/compact` ตรวจจับอัตโนมัติและแสดงแบบยุบ คลิกเพื่อขยายดูสรุปทั้งหมด
- ผลลัพธ์การเรียกเครื่องมือแสดงแบบ inline ภายในข้อความ Assistant ที่เกี่ยวข้อง
- บล็อก `thinking` ยุบตามค่าเริ่มต้น คลิกเพื่อขยาย
- `tool_use` แสดงเป็นการ์ดเรียกเครื่องมือแบบกะทัดรัด (Bash, Read, Edit, Write, Glob, Grep, Task แต่ละตัวมีการแสดงผลเฉพาะ)
- ข้อความเลือกของผู้ใช้ (AskUserQuestion) แสดงในรูปแบบถาม-ตอบ
- แท็กฉีดระบบ (`<system-reminder>`, `<project-reminder>` ฯลฯ) ยุบอัตโนมัติ
- ข้อความที่ฉีดโดยระบบถูกกรองอัตโนมัติ แสดงเฉพาะข้อมูลที่ผู้ใช้ป้อนจริง
- แสดงแบบแบ่งหลาย session (แบ่งอัตโนมัติหลัง `/compact`, `/clear` ฯลฯ)
- แต่ละข้อความแสดง timestamp ที่แม่นยำถึงวินาที

### สถิติ Token

แผงลอยในพื้นที่ส่วนหัว:

- จำนวน Token จัดกลุ่มตามโมเดล (input/output)
- จำนวน Cache creation/read และอัตราการเข้าถึง cache
- นับถอยหลังการหมดอายุ cache ของ Main Agent

### การจัดการ Log

ผ่านเมนูดรอปดาวน์ CC-Viewer ที่มุมซ้ายบน:

- นำเข้า log ในเครื่อง: เรียกดูไฟล์ log ย้อนหลัง จัดกลุ่มตามโปรเจกต์ เปิดในหน้าต่างใหม่
- โหลดไฟล์ JSONL ในเครื่อง: เลือกและโหลดไฟล์ `.jsonl` ในเครื่องโดยตรง (สูงสุด 200MB)
- ดาวน์โหลด log ปัจจุบัน: ดาวน์โหลดไฟล์ log JSONL ที่กำลังตรวจสอบอยู่
- ส่งออก prompt ผู้ใช้: แยกและแสดงข้อมูลที่ผู้ใช้ป้อนทั้งหมด พร้อมมุมมองยุบได้ของ system-reminder
- ส่งออก prompt เป็น TXT: ส่งออก prompt ผู้ใช้เป็นไฟล์ `.txt` ในเครื่อง

### รองรับหลายภาษา

CC-Viewer รองรับ 18 ภาษา สลับอัตโนมัติตามภาษาของระบบ:

简体中文 | English | 繁體中文 | 한국어 | Deutsch | Español | Français | Italiano | Dansk | 日本語 | Polski | Русский | العربية | Norsk | Português (Brasil) | ไทย | Türkçe | Українська

## License

MIT
